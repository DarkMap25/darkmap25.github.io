/* ===  Variables de configuration (modifiable : hauteur en vh, tailles, couleurs…) === */

        :root {
          /* hauteurs des sections (total = 100vh) */
          --header-height: 22vh;
          --map-height:    64vh;
          --intro-height:  12vh;
          --footer-height:  2vh;
        
          /* typographies & couleurs */
          --header-h1-font-size:      6em;
          --header-h1-color:          #e60000;
          --header-h1-shadow:         0 0 6px #000000;
          --header-tagline-font-size: 1.6em;
          --intro-font-size:          1.2em;
          --footer-font-size:         0.8em;
        }


/* ===  PARTIE I / GENERAL / INTRODUCTION / STRUCTURE SITE === */


/* === I.1.1 Styles généraux === */

              body {
                margin: 0; /* Suppression des marges par défaut */
                padding: 0; /* Suppression des espacements par défaut */
                background-color: #0d0d0d; /* Couleur de fond de secours si l'image échoue */
                background-image: url('./icons/background.jpg'); /* Image de fond */
                background-size: cover; /* La taille de l'image couvre tout l'écran */
                background-position: center; /* L'image est centrée */
                background-repeat: no-repeat; /* L'image ne se répète pas */
                background-attachment: scroll; /* Le fond défile avec la page (plus compatible mobile) */
                color: #f0f0f0; /* Couleur du texte */
                font-family: 'Quicksand', sans-serif; /* Police du texte */
                position: relative; /* Positionnement pour le calque noir transparent */
              }

/* === I.1.2 Calque noir transparent par-dessus l'image === */

              body::before {
                content: ""; /* Contenu vide pour un pseudo-élément */
                position: fixed; /* Position fixe pour couvrir toute la fenêtre */
                top: 0; /* Commence en haut de la page */
                left: 0; /* Commence à gauche de la page */
                width: 100%; /* Prend toute la largeur de l'écran */
                height: 100%; /* Prend toute la hauteur de l'écran */
                background: rgba(0, 0, 0, 0.2); /* Calque noir avec transparence */
                z-index: -1; /* Placer ce calque derrière le contenu principal */
              }

/* === I.2.1 Overlay d’intro  === */

              #intro-overlay {
                position: fixed;           /* couvre tout l’écran */
                top: 0; left: 0;
                width: 100%; height: 100%;
                background-color: #0d0d0d; /* ton fond sombre */
                background-image: url('./icons/background.jpg');
                background-size: cover;
                background-position: center;
                background-attachment: fixed;
                display: block;
              }

                /* Calque noir semi-transparent AU-DESSUS du background de l’overlay */
                #intro-overlay::before {
                  content: "";
                  position: absolute;      /* couvre tout #intro-overlay */
                  top: 0;
                  left: 0;
                  width: 100%;
                  height: 100%;
                  background: rgba(0, 0, 0, 0.2);
                  /* pas de z-index ici : par défaut il est derrière le contenu de #intro-overlay */
                }

              /* Conteneur pour positionner le header animé AU MÊME endroit que le header « réel » */
                    .overlay-header-container {
                          position: absolute;
                          top: 0;
                          left: 0;                             /* commence pile en haut à gauche */
                          width: 100%;                         /* prend toute la largeur */
                          height: var(--header-height);        /* même hauteur que <header> */
                          display: flex;                       /* même flex que <header> */
                          flex-direction: column;
                          align-items: center;
                          justify-content: center;             /* centre verticalement */
                          text-align: center;
                          z-index: 1;
                        }
              
              /* === Titre statique « darkmap » === */
              .overlay-header-container .static-title {
                  margin: 0;
                  margin-bottom: 0em;
                  font-size: var(--header-h1-font-size);
                  font-family: 'IM FELL ENGLISH SC', serif;
                  font-weight: 900;
                  text-align: center;
                  color: var(--header-h1-color);
                  text-shadow: 0px 0px 4px rgba(255, 255, 224, 0.8), 1px 1px 0px rgba(255, 255, 224, 1);
              }
              
              /* === Texte animé « La Carte de France, version Dark » === */
              
              /* === Texte animé “La carte de France, version Dark.” dans l’overlay === */
                        #overlay-text {
                          /* Style identique à header .tagline */
                          margin: 0;
                          font-size: var(--header-tagline-font-size);
                          color: #FFFFE0;
                          font-family: 'IM FELL ENGLISH SC', serif;
                          font-weight: 700;
                          line-height: 1;
                          display: inline-block;
                          text-align: center;
                          text-shadow:
                            0px 0px 4px rgba(230, 0, 0, 0.8),
                            1px 1px 0px rgba(230, 0, 0, 1);
                        /* Propriétés pour l’animation “machine à écrire” */
                          white-space: nowrap;               /* pas de retour à la ligne */
                          overflow: hidden;                  /* masque le texte non encore “tapé” */
                          width: 0;                          /* démarre à 0 pour l’animation */
                          border-right: 2px solid rgba(230,0,0,0.75); /* curseur */
                          animation: typing 4s steps(33, end) forwards;
                        }
                        
                        /* Keyframes du “typing” */
                        @keyframes typing {
                          from { width: 0ch; }
                          to   { width: 33ch; }
                        }
                                      
              /* === Fade-in carte, intro et footer après l’animation === */
              #map,
              .intro,
              footer {
                opacity: 0;
                transition: opacity 5s ease-in-out;
              }

/* === I.3. Structure site === */

/* === I.3.2 Mise en page flex-colonne full viewport === */

              html, body {
                height: 100vh;
                margin: 0;
                padding: 0;
              }
              body {
                display: flex;
                flex-direction: column;
              }

/* === I.3.3 Hauteurs des sections principales === */

              header {
                height: var(--header-height);
                display: flex;
                justify-content: flex-start;  /* aligne en haut */  
                flex-direction: column;
                align-items: center;
                justify-content: center;
                gap: 0em;               /* espace entre le h1 et la .tagline */
                padding-top: 0;               /* aucun padding supplémentaire */
              }

/* === I.3.4 Styles du header (titre + sous-titre) === */

                header h1 {
                  margin: 0;
                  margin-bottom: 0em;
                  font-size: var(--header-h1-font-size);
                  font-family: 'IM FELL ENGLISH SC', serif;
                  font-weight: 900;
                  text-align: center;
                  color: var(--header-h1-color);
                    text-shadow:
                    0px 0px 4px rgba(255, 255, 224, 0.8),  /* halo diffus semi-transparent */
                    1px 1px 0px rgba(255, 255, 224, 1);    /* ombre nette opaque */
                }
                
                header .tagline {
                  margin: 0;
                  font-size: var(--header-tagline-font-size);
                  color: #FFFFE0;
                  font-family: 'IM FELL ENGLISH SC', serif;
                  font-weight: 700;
                  margin-top: 0;                /* plus de marge au-dessus de la tagline */
                  line-height: 1;               /* compactage vertical */  
                  display: block;               /* s’assurer qu’elle n’est pas inline ou cachée */
                  text-align: center;
                      text-shadow: 
                    0px 0px 4px rgba(230, 0, 0, 0.8),          /* halo diffus rouge vif */
                    1px 1px 0px rgba(230, 0, 0, 1);             /* légère ombre nette en décalage */
                }
                
                #map {
                  /* Petit espace au-dessus et en-dessous pour respirer */
                  margin: 2vh auto 0vh;
                  /* Ajuste la hauteur pour toujours faire 70vh visibles */
                  height: calc(var(--map-height) - 2vh);
                  width: 90vw;
                  border-radius: 20px;
                  box-shadow: 0 0 50px #e60000;
                  z-index: 1;
                }
                
                .intro {
                  /* même largeur que la carte */
                  width: 80vw;
                  margin: 0.1vh auto 0;        /* 1vh au-dessus */
                  /* ton restyling */
                  height: var(--intro-height);
                  padding: 0 10px;
                  font-family: 'IM FELL ENGLISH SC', serif;
                  font-weight: 700;
                  color: #FFFFE0;
                  font-size: var(--intro-font-size);
                  text-shadow: var(--header-h1-shadow);
                  line-height: 1;
                  /* centrer chaque ligne de texte */
                  text-align: center;
                  /* retours à la ligne automatiques */
                  white-space: normal;
                  overflow: auto;
                  margin-top: 10px;
                  margin-bottom: 10px;
                      text-shadow: 
                    0px 0px 4px rgba(230, 0, 0, 0.8),          /* halo diffus rouge vif */
                    1px 1px 0px rgba(230, 0, 0, 1);             /* légère ombre nette en décalage */
                }  
                
                /* Assure-toi que l’intro ne masque pas le débordement */
                .intro {
                  overflow: visible !important;
                }
                
                /* lien “suggérer des lieux” dans l’intro */
                .intro-submit {
                  font-family: 'IM FELL ENGLISH SC', serif;
                  font-weight: 900;  
                  text-decoration: underline;
                  cursor: pointer;
                  color: #e60000;
                  text-shadow: none !important;
                  transition: transform 0.2s ease;  /* rend l’animation fluide */
                }

/* === I.3.5 Styles globaux du footer : largeur, centrage et décor === */

              footer {
                display: flex;                   /* mise en page en colonne flex */
                flex-direction: column;          /* empilement vertical */
                align-items: center;             /* centrage horizontal */
                justify-content: center;         /* centrage vertical */
                width: 100%;                     /* prend toute la largeur */
                margin: 0 auto;                  /* centré dans la page */
                text-align: center;              /* centrage du texte */
                padding: 2px;                    /* espacement interne */
                font-family: 'IM FELL ENGLISH SC', serif;
                font-size: var(--footer-font-size);                /* taille de la police */
                line-height: 0.8;                  /* interligne */
                color: #E6E6FA;                  /* couleur du texte */
                text-shadow: var(--header-h1-shadow);
              }
              
              /* i. Reset et espacement des paragraphes dans le footer */
              footer p {
                margin: 0;                       /* suppression des marges par défaut */
                padding: 0;                      /* suppression du padding par défaut */
              }
              footer p:not(:first-child) {
                margin-top: 0.4em;               /* espacement entre chaque paragraphe */
              }
              
              /* ii. Mentions légales : couleur fixe, gras et souligné pour tous les états */
              footer a#mentionsLink,
              footer a#mentionsLink:visited,
              footer a#mentionsLink:hover,
              footer a#mentionsLink:active {
                color: #E6E6FA !important;        /* même couleur que le footer */
                font-weight: bold !important;     /* toujours en gras */
                text-decoration: underline !important; /* toujours souligné */
              }

                /* iii. Bouton de fermeture unique */
                .overlay-close {
                  display: none;
                  position: fixed;
                  top: 1rem;
                  right: 1rem;
                  border: none;
                  background-color: #000000;
                  font-size: 2rem;
                  cursor: pointer;
                  z-index: 10003;
                  /* Transition pour l’effet au survol */
                  transition: transform 0.2s ease, background-color 0.2s ease;
                }
                
                /* Au survol, on augmente à 1.5 et on ajuste légèrement la couleur */
                .overlay-close:hover {
                  transform: scale(1.5);
                }                       

/* === PARTIE II / POP-UP / VOIR PLUS / SOUMETTRE === */


/* === II.1.1 Adaptation des popups Leaflet === */

                /* i. Le conteneur de la popup */
                .custom-popup .leaflet-popup-content-wrapper {
                  background: rgba(0, 0, 0, 0.8); /* fond semi-transparent sombre */
                  border: none;                                  /* suppression du contour rouge simple */
                  box-shadow: 0 0 50px #e60000;
                  border-radius: 8px;                            /* coins arrondis conservés */
                  padding: 10px;                                 /* espace interne */
                }
                
                /* ii. Le texte à l’intérieur */
                .custom-popup .leaflet-popup-content {
                  font-family: 'Im Fell English SC', serif;
                  font-size: 1.5em;                 /* ajuste la taille du texte */
                  line-height: 1.0;               /* espacement des lignes */
                  color: #FFFFE0;                 /* texte clair */
                  margin: 0;
                      text-shadow: 
                    0px 0px 4px rgba(230, 0, 0, 0.8),          /* halo diffus rouge vif */
                    1px 1px 0px rgba(230, 0, 0, 1);             /* légère ombre nette en décalage */
                }
                
                /* iii. Le “triangle” pointant sur le marqueur */
                .custom-popup .leaflet-popup-tip {
                  background: rgba(0, 0, 0, 0.8);
                }
                
                /* iv. Titre du popup (le <strong> dans popupContent) */
                .custom-popup .leaflet-popup-content strong {
                  display: block;             /* pour prendre toute la largeur */
                  font-size: 1.5em;           /* légèrement plus gros */
                  font-family: 'Im Fell English SC', serif;
                  font-weight: bold;          /* bien en gras */
                  color: #e60000;             /* rouge DarkMap */
                  text-align: center;         /* centré */
                  text-transform: uppercase; /* transforme en majuscule */
                  margin-bottom: 0em;       /* petit espace sous le titre */
                    text-shadow:
                    0px 0px 4px rgba(255, 255, 224, 0.8),  /* halo diffus semi-transparent */
                    1px 1px 0px rgba(255, 255, 224, 1);    /* ombre nette opaque */
                }
                
                /* v. Style spécifique pour le lien “Voir plus” dans les popups */
                .custom-popup .voir-plus {
                  color: #e60000 !important;       /* même rouge vif que le reste */
                  font-weight: bold !important;    /* gras */
                  text-decoration: underline !important; /* toujours souligné */
                  text-shadow: none !important;    /* supprime l’ombre héritée */
                }

/* === II.1.2 Scroll PopUP === */

                .custom-popup .leaflet-popup-content {
                  overflow-y: auto;    /* autorise le scroll vertical */
                  overflow-x: auto;  /* le scroll horizontal */
                  /* facultatif : pour une barre plus discrète */
                  scrollbar-width: thin;       /* Firefox */
                  scrollbar-color: #e60000 transparent;
                }
                
                /* Chrome, Edge, Safari */
                .custom-popup .leaflet-popup-content::-webkit-scrollbar {
                  width: 6px;
                }
                .custom-popup .leaflet-popup-content::-webkit-scrollbar-thumb {
                  background-color: #e60000;
                  border-radius: 3px;
                }
                .custom-popup .leaflet-popup-content::-webkit-scrollbar-track {
                  background: transparent;
                }

/* === II.2.1 VOIR PLUS : fullscreen uniquement quand ouvert === */

                /* i. Par défaut, on le cache et on ne définit PAS sa hauteur ici */
                #detailPanel {
                  display: none;
                }

                /* Plein écran quand visible === */
                #detailPanel.visible {
                  display: block;           /* on passe de none à block */
                  position: fixed;          /* au-dessus de tout */
                  top: 0;
                  left: 0;
                  width: 100vw;             /* largeur totale de la fenêtre */
                  height: 100vh;            /* hauteur totale de la fenêtre */
                  background-color: rgba(0, 0, 0, 0.9);
                  color: #fff;
                  z-index: 2000;
                  overflow: auto;           /* scroll si contenu trop long */
                }
                
                /* Un peu de padding quand on est en plein écran */
                #detailPanel.full-view {
                  padding: 2rem;
                }

/* === II.3 Submit Panel corrigé === */

                /* 1) Overlay plein écran, caché par défaut */
                #submitPanel {
                  position: fixed;
                  top: 0;
                  left: 0;
                  width: 100vw;
                  height: 100vh;
                  background-image: url('./icons/submit.jpg');
                  background-size: cover;
                  background-position: center;
                  background-repeat: no-repeat;
                  overflow: hidden;      /* le scroll se fera uniquement dans #submitContent */
                  z-index: 10000;
                  display: none;         /* rendu visible uniquement quand on ajoute .visible */
                }
                
                /* 2) Affichage quand on ajoute .visible */
                #submitPanel.visible {
                  display: block;
                }
                
                /* 3) Réinitialiser la hauteur du header (globale de 22vh) */
               #submitPanel header {
                            height: auto !important;
                            margin: 0;
                            padding: 0;
                            background: transparent;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            justify-content: center;
                            position: relative;
                            z-index: 10001;
                        }                
                /* 4) Placer le <h1> exactement à 1rem du sommet, centré, avec ombre conservée */
                                     #submitPanel header h1 {
                            margin: 0;
                            font-size: var(--header-h1-font-size);
                            font-family: 'IM FELL ENGLISH SC', serif;
                            font-weight: 900;
                            color: var(--header-h1-color);
                            text-shadow: 0px 0px 4px rgba(255, 255, 224, 0.8),
                                         1px 1px 0px rgba(255, 255, 224, 1);
                            text-align: center;
                            position: static; /* Changement ici */
                            top: auto;       /* Et ici */
                            left: auto;      /* Et ici */
                            transform: none; /* Et ici */
                            width: auto;     /* Et ici */
                            z-index: auto;   /* Et ici */
                            padding-top: 0rem; /* Ajoute un peu d'espace en haut */
                        }                
                /* 5)tagline  */
                                              #submitPanel header .tagline {
                                    display: block; /* Assure-toi qu'elle est affichée */
                                    margin: 1em;
                                    font-size: var(--header-tagline-font-size);
                                    color: #FFFFE0;
                                    font-family: 'IM FELL ENGLISH SC', serif;
                                    font-weight: 700;
                                    margin-top: 0;
                                    line-height: 1;
                                    text-align: center;
                                    text-shadow: 0px 0px 4px rgba(230, 0, 0, 0.8),
                                                 1px 1px 0px rgba(230, 0, 0, 1);
                                }                
                /* 6) Zone interne scrollable (#submitContent), commence juste sous le <h1> */
                                       #submitContent {
                            position: static; /* Changement ici */
                            top: auto;       /* Et ici */
                            bottom: auto;    /* Et ici */
                            left: auto;      /* Et ici */
                            right: auto;     /* Et ici */
                            overflow-y: auto;
                            padding: 1rem;
                        }                
                /* 7) Si jamais #submitContent contenait lui aussi un <header>, on neutralise sa hauteur */
                #submitContent header {
                  height: auto !important;
                  margin: 0;
                  padding: 0;
                  background: transparent;
                }
                
                /* 9) (Optionnel) Si vous aviez mis des règles globales “html, body { overflow: hidden; }” et que vous souhaitez que
                       la page globale puisse défiler, commentez ces lignes. Sinon, laissez-les désactivées (commentées) : */
                /*
                html, body {
                  margin: 0;
                  padding: 0;
                  // height: 100vh;
                  // overflow: hidden;
                }
                */

/* === II.4 STYLES SOUMETTRE INTERNE === */

                /* Styles pour les questions du formulaire de soumission */
                .ask-submit {
                  font-family: 'IM Fell English SC', serif;   /* police immersive */
                  font-weight: 700;                           /* gras */
                  font-size: 1.2em;                           /* taille souhaitée */
                  color: #e60000;                             /* couleur rouge rappelant DarkMap */
                  text-shadow:    0px 0px 4px rgba(255, 255, 224, 0.8),  /* halo diffus semi-transparent */
                    1px 1px 0px rgba(255, 255, 224, 1);    /* ombre nette opaque */  
                  text-transform: uppercase;
                  margin: 0.2em 0.2em 0.2em;                        /* espacement vertical */
                }
                
                /* Cible uniquement les <small> dans les .ask-submit */
                #submitPanel .ask-submit small {
                  color: #FEEEE0;
                  font-family: 'IM Fell English SC', serif;   /* police immersive */
                  font-size: 0.8em;                           /* taille souhaitée */
                  font-style: italic;  /* italique */  
                        text-shadow: 
                    0px 0px 4px rgba(230, 0, 0, 0.8),          /* halo diffus rouge vif */
                    1px 1px 0px rgba(230, 0, 0, 1);             /* légère ombre nette en décalage */
                }
                
                /* 2-col layout pour le formulaire submit */
                .form-grid {
                  display: grid;
                  grid-template-columns: repeat(2, 1fr);
                  grid-gap: 1.5rem;
                }
                
                /* Chaque question+input dans sa propre « case » */
                .form-group {
                  display: flex;
                  flex-direction: column;
                }
                
                /* Champs qui occupent toute la largeur */
                .form-grid > .form-group[style*="grid-column"] {
                  grid-column: 1 / -1;
                }
                
                /* 1) On fixe le panel en full-screen */
                #submitPanel {
                  position: fixed;       /* colle le panel à la fenêtre */
                  background-image: url('./icons/bureau.jpg');
                  background-size: cover;
                  background-position: center;
                  background-repeat: no-repeat;
                  overflow: auto;  top: 0;
                  left: 0;
                  width: 100vw;          /* pleine largeur */
                  height: 100vh;         /* pleine hauteur */
                  overflow: hidden !important;
                  z-index: 10000;        /* au-dessus de tout */
                }
                
                /* Affiche le panel quand la classe .visible est appliquée */
                #submitPanel.visible {
                  display: block;
                }
                
                /* 2) (Optionnel) si tu veux un scroll interne pour le contenu */
                #submitContent {
                  position: absolute;
                  top: 3rem;             /* laisse de la place pour la croix */
                  bottom: 0;
                  left: 0;
                  right: 0;
                  overflow-y: auto;      /* scroll vertical si nécessaire */
                  padding: 1rem;
                }
                
                /* Responsive : 1 colonne sous 768px */
                @media (max-width: 768px) {
                  .form-grid {
                    grid-template-columns: 1fr;
                  }
                }

/* === II.4.2 Styles généraux pour les champs <input> et <textarea> de classe .form-input === */

                input.form-input,
                textarea.form-input {
                  /* i. Le texte à l’intérieur */
                  /* On reprend la même police, taille, interligne et ombre que pour la popup Leaflet */
                  font-family: 'Im Fell English SC', serif;
                  font-size: 1.5em;             /* ajuste la taille du texte */
                  line-height: 1.0;             /* espacement des lignes */
                  color: #FFFFE0;               /* texte clair (jaune très pâle) */
                  margin: 0;                    /* pas de marge interne au composant */
                  text-shadow:
                    0px 0px 4px rgba(230, 0, 0, 0.8),  /* halo diffus rouge vif */
                    1px 1px 0px rgba(230, 0, 0, 1);    /* légère ombre nette en décalage */
                
                  /* ii. Le fond sombre et le contour lumineux (wrapper) */
                  background: rgba(0, 0, 0, 0.8); /* fond semi-transparent sombre */
                  border: none;                   /* suppression du contour rouge simple */
                  box-shadow: 0 0 50px #e60000;   /* grand halo rouge autour du champ */
                  border-radius: 8px;             /* coins arrondis identiques à la popup */
                
                  /* iii. Gestion de la taille et du défilement (scroll) */
                  width: 100%;                    /* le champ remplit la largeur du conteneur parent */
                  max-width: 600px;               /* largeur maximale personnalisable */
                  /* Hauteur de base (pour <input>), mais on peut ramener à auto si besoin */
                  height: 2.5em;                  
                  padding: 10px;                  /* espace intérieur équivalent à la popup */
                  box-sizing: border-box;         /* inclut padding et bordure dans la largeur/hauteur */
                
                  overflow-y: auto;               /* si le texte dépasse (surtout pour <textarea>), on peut défiler verticalement */
                  resize: vertical;               /* si c’est un <textarea>, on autorise le redimensionnement vertical */
                }
                
                /* iv. text-area */
                textarea.form-input {
                  min-height: 8em;               /* hauteur minimale pour laisser respirer le texte */
                  /* Si le contenu dépasse, la scrollbar verticale apparaîtra */
                  overflow-y: auto;
                }
                
                input.form-input::placeholder,
                textarea.form-input::placeholder {
                  color: #aaa;   /* gris clair pour le texte indicatif */
                  opacity: 1;    /* s’assurer que c’est pleinement visible */
                }

/* === II.4.3 CORRECTIONS SOUMETTRE === */

                /* 1) Forcer html/body en plein écran sans marges ni scroll global */
                html, body {
                  margin: 0;
                  padding: 0;
                  height: 100vh;
                  overflow: hidden;
                }
                

/* === PARTIE III / PERSONNALISATION BOUTONS / STYLES === */


/* === III.1.1 PERSONNALISATION DU BOUTON DE CHANGEMENT DE CARTE (Contrôle Leaflet) === */

                .leaflet-control-layers {
                  color: #1a001a; /* texte sombre pour le contraste */
                  font-family: 'Quicksand', sans-serif; font-weight: 700;  
                }

/* === III.1.2 PERSONNALISATION DU BOUTON DE LOCALISATION (Emoji Direct Hit Visible et Cliquable) === */

                  .leaflet-control-locate {
                    background-color: transparent !important; /* Fond transparent */
                    border: none !important; /* Pas de bordure */
                    padding: 0 !important; /* Pas de rembourrage */
                    width: auto !important; /* Ajuster la largeur au contenu */
                    height: auto !important; /* Ajuster la hauteur au contenu */
                    cursor: pointer; /* Curseur "main" */
                    text-align: center !important; /* Centrer l'emoji */
                    overflow: visible !important; /* Empêcher débordement */
                    display: flex !important; /* Utiliser flex pour centrer */
                    justify-content: center !important; /* Centrage horizontal */
                    align-items: center !important; /* Centrage vertical */
                  }
                  
                  .leaflet-control-locate .leaflet-bar-part-single {
                    background-color: transparent !important;
                    border: none !important;
                    padding: 0px !important; /* Un peu de padding pour l'interaction */
                    width: auto !important;
                    height: auto !important;
                    cursor: pointer;
                    text-align: center !important;
                    font-size: 2.5em !important; /* Taille de l'emoji */
                    line-height: 1 !important; /* Centrage vertical */
                    color: inherit !important; /* IMPORTANT : Hériter de la couleur pour rendre l'emoji visible */
                    text-shadow: none !important;
                    display: flex !important; /* Utiliser flex pour centrer */
                    justify-content: center !important; /* Centrage horizontal */
                    align-items: center !important; /* Centrage vertical */
                  }
                  
                  /* i. Afficher l'emoji comme contenu de l'élément <a>  */
                  .leaflet-control-locate .leaflet-bar-part-single::before {
                    content: "🎯" !important; /* Emoji direct hit */
                    display: block !important; /* Important pour que le pseudo-élément prenne de la place */
                    width: 100%;
                    height: 100%;
                    line-height: inherit !important; /* Hériter pour le centrage vertical */
                    font-size: inherit !important; /* Hériter de la taille définie sur l'<a> */
                    text-align: center !important; /* S'assurer que l'emoji est centré */
                    transition: transform 0.2s ease;  /* Animation douce */  
                    /* On ne définit pas de couleur ici, on hérite de celle de l'élément <a> */
                  }
                  
                  .leaflet-control-locate .leaflet-bar-part-single:hover::before {
                    transform: scale(1.5); /* ✅ effet de grossissement uniquement au survol */
                  }

/* === III.1.3 PERSONNALISATION DU BOUTON DE CHANGEMENT DE FOND DE CARTE AVEC UN EMOJI 🗺️ === */

                .leaflet-control-layers-toggle {
                  background-color: transparent !important;
                  background-image: none !important;
                  width: auto !important;
                  height: auto !important;
                  border: none !important;
                  font-size: 2.5em !important;
                  line-height: 1 !important;
                  display: flex !important;
                  justify-content: center !important;
                  align-items: center !important;
                  cursor: pointer;
                  color: inherit !important;
                  z-index: 1000 !important;
                }
                
                .leaflet-control-layers-toggle::before {
                  content: "🗺️";
                  display: block;
                  font-size: inherit;
                }

/* === III.1.4 PERSONNALISATION DU BOUTON DE / FULLSCREEN / SOUMETTRE === */

                #randomButton {
                    background-color: transparent !important;
                    border: none !important;
                    padding: 0px !important;
                    width: auto !important;
                    height: auto !important;
                    cursor: pointer;
                    text-align: center !important;
                    font-size: 2.5em !important; /* même que 🎯 */
                    line-height: 1 !important;
                    color: inherit !important;
                    text-shadow: none !important;
                    display: flex !important;
                    justify-content: center !important;
                    align-items: center !important;
                    /* Suppression de la marge ici, le positionnement se fera via Leaflet */
                    overflow: visible !important; /* 🔥 empêche le rognage */
                    transition: transform 0.2s ease; /* Ajout de la transition pour l'effet au survol */
                }
                
                #randomButton:hover {
                    transform: scale(1.5);
                }
                
                #fullscreenButton {
                    background-color: transparent !important;
                    border: none !important;
                    padding: 0px !important;
                    width: auto !important;
                    height: auto !important;
                    cursor: pointer;
                    text-align: center !important;
                    font-size: 2.5em !important;
                    line-height: 1 !important;
                    color: inherit !important;
                    text-shadow: none !important;
                    display: flex !important;
                    justify-content: center !important;
                    align-items: center !important;
                    overflow: visible !important;
                    transition: transform 0.2s ease;
                }
                
                #fullscreenButton:hover {
                    transform: scale(1.5);
                }

/* === III.1.4 bis – Personnalisation de l’emoji 📜 en bas à droite === */

                  /* 1) Autorise le débordement pour ne pas rogner la mise à l’échelle */
                  .leaflet-control-container,
                  .leaflet-bar {
                    overflow: visible !important;
                  }
                  
                  /* 2) Cible le conteneur bottom-right natif de Leaflet */
                  .leaflet-bottom.leaflet-right {
                    display: block !important;   /* bloque le flex par défaut pour un stacking simple */
                  }
                  
                  /* 3) Style identique au fullscreenButton pour le contrôle submit-story */
                  .leaflet-bottom.leaflet-right .submit-story-control {
                    background-color: transparent !important;
                    border: none !important;
                    padding: 0 !important;
                    width: auto !important;
                    height: auto !important;
                    cursor: pointer;
                    text-align: center !important;
                    font-size: 2.5em !important;     /* même taille que 🎯, 🗺️, Random… */
                    line-height: 1 !important;
                    color: inherit !important;
                    text-shadow: none !important;
                    display: flex !important;
                    justify-content: center !important;
                    align-items: center !important;
                    transition: transform 0.2s ease;
                    margin-bottom: 0.5em !important; /* espace exactement identique avec fullscreen */
                  }
                  
                  /* 4) Hover = scale(1.5) */
                  .leaflet-bottom.leaflet-right .submit-story-control:hover {
                    transform: scale(1.5);
                  }

/* === III.2 STYLES DIVERSES === */

/* === III.2.1 Marqueurs emoji === */

                .emoji-marker {
                  font-size: 16px; /* Taille des marqueurs emoji */
                  background: none; /* Pas de fond */
                  border: none; /* Pas de bordure */
                  box-shadow: none; /* Pas d'ombre */
                  width: auto; /* Taille automatique */
                  height: auto; /* Taille automatique */
                  line-height: 1; /* Hauteur de ligne pour centrer */
                  color: inherit; /* Couleur héritée du parent */
                }

                /* i. On vise le conteneur de l’emoji et on prépare une transition fluide */
                .emoji-marker {
                  display: inline-block;           /* nécessaire pour que transform fonctionne correctement */
                  transform-origin: center center; /* pivote et agrandit depuis le centre */
                  transition: transform 0.2s ease; /* lissage de l’animation */
                }
                
                /* ii. Au survol, on augmente la taille à 1.5× */
                .emoji-marker:hover {
                  transform: scale(1.5);
                }
                
/* === III.2.2 Style pour la légende sans ombre et coins arrondis === */

                .info.legend {
                  color: #FFFFE0;  /* Couleur */
                  padding: 0px;  /* Espace interne autour du texte */
                  font-size: 16px;  /* Taille du texte */
                  font-family: 'Im Fell English SC', serif;
                  line-height: 1.0;  /* Hauteur de ligne pour améliorer la lisibilité */
                    text-shadow: 
                    0px 0px 4px rgba(230, 0, 0, 0.8),          /* halo diffus rouge vif */
                    1px 1px 0px rgba(230, 0, 0, 1);             /* légère ombre nette en décalage */
                }
                
                /* i. Style pour chaque élément de la légende */
                .legend-item {
                  display: flex;
                  align-items: center;
                  margin-bottom: 4px;
                }
                
                /* ii. Style pour l'emoji dans la légende */
                .legend-item .emoji {
                  font-size: 16px;
                  margin-right: 2px;
                }
                
                /* iii. Style pour le nom de la catégorie */
                .legend-item .category-name {
                  font-size: 16px;
                  font-weight: bold;
                }

/* === III.2.3 Positionnement des contrôles en haut à droite === */

                .leaflet-topright {
                    display: flex; /* Utiliser flex pour aligner les éléments verticalement */
                    flex-direction: column; /* Aligner les éléments en colonne */
                    align-items: flex-end; /* Aligner les éléments à droite */
                    gap: 10px; /* Espacement vertical entre les boutons */
                    padding: 10px; /* Marge autour du groupe de boutons */
                }
                
                .leaflet-control-custom {
                    overflow: visible !important; /* 🔥 Leaflet limite parfois la taille à cause de ça */
                }


/* === PARTIE IV / ADAPTATIONS === */


/* === IV.1 Adaptation pour écrans jusqu’à 768px === */

              @media (max-width: 768px) {
                /* — Fond mobile (image différente, rognée et défilante) */
                body {
                  background-image: url('./icons/background.jpg');
                  background-size: cover;
                  background-position: center center;
                  background-attachment: scroll;
                }
              
                /* i. Carte : hauteur réduite, centrée et coins arrondis */
                #map {
                  height: 66vh;
                  max-width: 90%;
                  margin: 0 auto;
                }
              
                /* ii. Titre principal : taille réduite */
                h1 {
                  font-size: 1.5em;
                }
              
                /* iii. Texte d’introduction : taille réduite et marges ajustées */
                .intro {
                  font-size: 0.8em;
                  margin: 20px auto;
                }
              
                /* iv. Conteneur de l’intro : taille de police encore plus petite */
                #intro-text {
                  font-size: 1.0em;
                }
              
                /* v. Popups Leaflet : largeur et typographie adaptées */
                .leaflet-popup-content-wrapper {
                  max-width: 334px !important;
                }
                .leaflet-popup-content,
                .leaflet-popup-content * {
                  font-size: 1.0em !important;
                  line-height: 1.0 !important;
                }
              }

/* === IV.2 Adaptation pour écrans jusqu’à 480px === */

              @media (max-width: 480px) {
                /* i. Fond très petit écran (mêmes réglages que pour 768px) */
                body {
                  background-image: url('./icons/background.jpg');
                  background-size: cover;
                  background-position: center center;
                  background-attachment: scroll;
                }
              
                /* ii. Carte : largeur fixe, sans ombre pour alléger l’affichage */
                #map {
                  height: 66vh;
                  width: 90%;
                  margin: 0 auto;
                }
              
                /* iv. Titre principal : même taille que pour 768px */
                h1 {
                  font-size: 1.5em;
                }
              
                /* v. Texte d’introduction : taille encore réduite */
                .intro {
                  font-size: 0.5em;
                }
              
                /* vi. Conteneur de l’intro : taille minimale */
                #intro-text {
                  font-size: 1.0em;
                }
              
                /* vii. Popups Leaflet : largeur et typographie pour petits écrans */
                .leaflet-popup-content-wrapper {
                  max-width: 240px !important;
                }
                .leaflet-popup-content,
                .leaflet-popup-content * {
                  font-size: 10px !important;
                  line-height: 1 !important;
                }
              }

/* === IV.3 Surcharge de carte réglée en dernier pour prendre le pas === */

              body > #map {
                height: var(--map-height) !important;  /* prendra comme défini dans :root */
              }
